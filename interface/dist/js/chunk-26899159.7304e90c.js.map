{"version":3,"sources":["webpack:///./src/views/bank/RBTBank/rbtBank.vue?ed5d","webpack:///./src/views/bank/RBTBank/rbtBank.vue?80c5","webpack:///src/views/bank/RBTBank/rbtBank.vue","webpack:///./src/views/bank/RBTBank/rbtBank.vue?c05d","webpack:///./src/views/bank/RBTBank/rbtBank.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","RBT","_f","btcPrice","toFixed","on","$event","dialogVisible","scopedSlots","_u","key","fn","proxy","directives","name","rawName","value","expression","attrs","accountData","scope","row","parseFloat","available","waitExtract","locked","staticStyle","isShowRecord","bankTokenArr","length","updateTable","_l","item","index","operateRClick","_e","monthChange","model","callback","$$v","chooseMonth","label","class","subAmount","amount","setMax","pledge","staticRenderFns","data","balanceArr","arr1","arr2","monthsArr","selectIndex","allowance","isLoadingT","isLoadingT2","created","initData","computed","$store","state","rainbowBank","records","forEach","nameObj","title","tokenId","infoArr","detailArr","withdrawa","arr","push","obj","excRecords","seedExc","consensusRecords","consensus","contributionRecords","contribution","inviteRecords","invite","seedExcA","totalExc","extracted","consensusA","getRbtRecord","lockNum","extractable","contributionA","watch","isConnected","methods","Math","floor","allRbt","dispatch","then","account","checkLimit","extract","chooseMax","$set","chooseRecord","templateAmount","record","arrIdx","xuhao","arrAmount","$message","owner","spender","res","type","message","release","tableData","tokenid","console","log","subPledge","month","created_at","depositor","err","component"],"mappings":"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","file":"js/chunk-26899159.7304e90c.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rbtBank.vue?vue&type=style&index=0&id=51816e5b&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rbt-bank\"},[_c('div',{staticClass:\"r-panel\"},[_vm._m(0),_c('div',{staticClass:\"rbt-info\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"我的RBT余额\")]),_c('div',{staticClass:\"data\"},[_vm._v(\" \"+_vm._s(_vm.RBT)+\"RBT \")])]),_c('div',{staticClass:\"rbt-value\"},[_c('div',{staticClass:\"name\"},[_vm._v(\" 价值 (BTC) \")]),_c('div',{staticClass:\"data\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formatNumber\")((_vm.RBT/_vm.btcPrice).toFixed(2)))+\" \"),_c('span',{staticClass:\"btc-value\"},[_vm._v(\"≈$ \"+_vm._s(_vm.RBT*0.4))])])]),_c('div',{staticClass:\"stake-btn\",on:{\"click\":function($event){_vm.dialogVisible=true}}},[_vm._v(\" STAKE \")])]),_c('RainbowPanel',{staticClass:\"rainCard-box\",scopedSlots:_vm._u([{key:\"name\",fn:function(){return [_c('div',{staticClass:\"bank-panel-header\"},[_c('span',[_vm._v(\"我的RBT资产\")]),_c('span',{staticClass:\"erc-info erc-info-r\"},[_vm._v(\"ERC20\")])])]},proxy:true},{key:\"content\",fn:function(){return [_c('div',{staticClass:\"pledge\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoadingT),expression:\"isLoadingT\"}],attrs:{\"data\":_vm.accountData,\"border\":\"\",\"align\":\"center\",\"show-summary\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.name)+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"available\",\"label\":\"可用RBT\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_vm._v(\" \"+_vm._s(_vm._f(\"formatNumberTo\")(parseFloat(scope.row.available)))+\" \")])}}])}),_c('el-table-column',{attrs:{\"prop\":\"waitExtract\",\"label\":\"待提取RBT\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_vm._v(\" \"+_vm._s(_vm._f(\"formatNumberTo\")(parseFloat(scope.row.waitExtract)))+\" \")])}}])}),_c('el-table-column',{attrs:{\"prop\":\"locked\",\"label\":\"锁仓中RBT\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_vm._v(\" \"+_vm._s(_vm._f(\"formatNumberTo\")(parseFloat(scope.row.locked)))+\" \")])}}])})],1)],1)]},proxy:true}])}),_c('RainbowPanel',{staticClass:\"rbt-deposit\",scopedSlots:_vm._u([{key:\"name\",fn:function(){return [_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('span',{staticStyle:{\"font-size\":\"18px\"}},[_vm._v(\"我的RBT-deposit \"),_c('span',{staticClass:\"erc-info\"},[_vm._v(\"ERC721\")])]),_c('el-button',{staticClass:\"button-view\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.isShowRecord = true}}},[_vm._v(\" 已过期 \")])],1)]},proxy:true},{key:\"content\",fn:function(){return [(_vm.bankTokenArr.length>0&& _vm.updateTable)?_vm._l((_vm.bankTokenArr),function(item){return _c('div',{key:item.index},[_c('TableItem',{attrs:{\"tableData\":item,\"operateRName\":\"取款\"},on:{\"operateRClick\":_vm.operateRClick}})],1)}):_vm._e()]},proxy:true}])}),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"质押\",\"visible\":_vm.dialogVisible,\"width\":\"380px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"line\"},[_c('strong',[_vm._v(\"质押类型\")]),_c('el-select',{staticClass:\"select\",attrs:{\"placeholder\":\"请选择质押月份\",\"size\":\"mini\"},on:{\"change\":_vm.monthChange},model:{value:(_vm.chooseMonth),callback:function ($$v) {_vm.chooseMonth=$$v},expression:\"chooseMonth\"}},_vm._l((_vm.monthsArr),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticClass:\"line\"},[_c('strong',[_vm._v(\"质押资产\")]),_vm._v(\" \"),_c('span')]),_c('div',{staticClass:\"line\"},[_c('span',[_vm._v(\"我的RBT\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Balance: \"+_vm._s(_vm.RBT)+\" RBT\")])]),_c('div',{staticClass:\"input-box\"},[_c('el-input',{staticClass:\"input2\",class:{'active':_vm.subAmount[0]>0},attrs:{\"size\":\"small\"},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('el-button',{on:{\"click\":function($event){return _vm.setMax(0)}}},[_vm._v(\"MAX\")])],1),_c('div',{staticClass:\"line\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible=false}}},[_vm._v(\"取消\")]),_c('el-button',{on:{\"click\":_vm.pledge}},[_vm._v(\"质押\")])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":require(\"../../../assets/img/RBT.png\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"rbt-bank\">\r\n    <div class=\"r-panel\">\r\n      <div class=\"icon\">\r\n        <img src=\"../../../assets/img/RBT.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"rbt-info\">\r\n        <div class=\"name\">我的RBT余额</div>\r\n        <div class=\"data\">\r\n          {{RBT}}RBT\r\n        </div>\r\n      </div>\r\n      <div class=\"rbt-value\">\r\n        <div class=\"name\">\r\n          价值 (BTC)\r\n        </div>\r\n        <div class=\"data\">\r\n          {{ (RBT/btcPrice).toFixed(2)|formatNumber }}\r\n           <span class=\"btc-value\">≈$ {{RBT*0.4}}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"stake-btn\"  @click=\"dialogVisible=true\">\r\n        STAKE\r\n      </div>\r\n    </div>\r\n    <RainbowPanel class=\"rainCard-box\">\r\n\r\n      <template v-slot:name>\r\n        <div class=\"bank-panel-header\">\r\n          <span>我的RBT资产</span>\r\n          <span class=\"erc-info erc-info-r\">ERC20</span>\r\n        </div>\r\n      </template>\r\n      <template v-slot:content>\r\n\r\n        <div class=\"pledge\">\r\n          <el-table\r\n              :data=\"accountData\"\r\n              border\r\n              v-loading=\"isLoadingT\"\r\n              align=\"center\"\r\n              show-summary>\r\n            <el-table-column\r\n                prop=\"name\"\r\n                label=\"类型\"\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.name }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"available\"\r\n                label=\"可用RBT\"\r\n            >\r\n              <div slot-scope=\"scope\">\r\n                {{ parseFloat(scope.row.available) |formatNumberTo }}\r\n              </div>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"waitExtract\"\r\n                label=\"待提取RBT\"\r\n            >\r\n              <div slot-scope=\"scope\">\r\n                {{ parseFloat(scope.row.waitExtract) |formatNumberTo }}\r\n              </div>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"locked\"\r\n                label=\"锁仓中RBT\"\r\n            >\r\n              <div slot-scope=\"scope\">\r\n                {{ parseFloat(scope.row.locked) |formatNumberTo }}\r\n              </div>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </template>\r\n    </RainbowPanel>\r\n    <RainbowPanel class=\"rbt-deposit\">\r\n      <template v-slot:name>\r\n        <div style=\"display: flex;justify-content: space-between;\">\r\n          <span style=\"font-size: 18px;\">我的RBT-deposit\r\n            <span class=\"erc-info\">ERC721</span>\r\n          </span>\r\n          <el-button @click=\"isShowRecord = true\" class=\"button-view\"\r\n                     size=\"mini\">\r\n            已过期\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n      <template v-slot:content>\r\n        <!-- <el-table :data=\"bankTokenArr\"\r\n                  v-loading=\"isLoadingT2\"\r\n                  stripe>\r\n          <el-table-column label=\"令牌编号\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"idx\">{{ scope.row.tokenId }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"depositor\"\r\n              label=\"初始生成者\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"质押周期\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.month > 0 ? scope.row.month + '个月' : '活期' }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              label=\"生成时间\">\r\n            <div slot-scope=\"scope\">\r\n              {{ new Date(scope.row.created_at) }}\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column\r\n              label=\"到期时间\">\r\n            <div slot-scope=\"scope\">\r\n              {{ new Date(scope.row.updated_at )  }}\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"mortgageAmount\"\r\n              label=\"包含RBT数量\"\r\n          >\r\n            <div slot-scope=\"scope\">\r\n              {{ scope.row.amount |formatNumberTo }}\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"usedAmount\"\r\n              label=\"生成社区治理令牌总额度\"\r\n          >\r\n            <template slot=\"header\">\r\n              <div style=\"text-align: center\">\r\n                生成社区<br/>治理令牌总额度\r\n              </div>\r\n            </template>\r\n            <div slot-scope=\"scope\">\r\n              {{ scope.row.usedAmount |formatNumberTo }}\r\n            </div>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"取款\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"release(scope.row)\" class=\"button1\">取款</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table> -->\r\n        <template v-if=\"bankTokenArr.length>0&& updateTable\">\r\n          <div v-for=\"item in bankTokenArr\" :key=\"item.index\">\r\n            <TableItem :tableData=\"item\" operateRName=\"取款\" @operateRClick=\"operateRClick\"/>\r\n          </div>\r\n        </template>\r\n      </template>\r\n    </RainbowPanel>\r\n    <el-dialog\r\n        title=\"质押\"\r\n        :visible.sync=\"dialogVisible\"\r\n        class=\"dialog\"\r\n        width=\"380px\"\r\n    >\r\n      <div class=\"line\">\r\n        <strong>质押类型</strong>\r\n        <el-select v-model=\"chooseMonth\" @change=\"monthChange\" placeholder=\"请选择质押月份\" size=\"mini\" class=\"select\">\r\n          <el-option\r\n              v-for=\"item in monthsArr\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n      <div class=\"line\"><strong>质押资产</strong> <span></span></div>\r\n      <div class=\"line\"><span>我的RBT</span> <span>Balance: {{RBT}} RBT</span></div>\r\n      <div class=\"input-box\">\r\n        <el-input class=\"input2\" :class=\"{'active':subAmount[0]>0}\" size=\"small\" v-model=\"amount\"></el-input>\r\n        <el-button @click=\"setMax(0)\">MAX</el-button>\r\n      </div>\r\n      <!-- <div class=\"line\"><span>种子轮兑换矿池：</span> <span>Balance:  {{ balanceArr[1] ? balanceArr[1] : 0 | formatNumberTo }}  RBT</span>\r\n      </div>\r\n      <div class=\"input-box\">\r\n        <el-input class=\"input2\" :class=\"{'active':subAmount[1]>0}\" size=\"small\" v-model=\"subAmount[1]\"></el-input>\r\n        <el-button @click=\"setMax(1)\">MAX</el-button>\r\n      </div>\r\n      <div class=\"line\"><span>共识挖矿矿池：</span> <span>Balance:  {{\r\n          balanceArr[2] > 0 ? balanceArr[2] : 0 | formatNumberTo\r\n        }}  RBT</span></div>\r\n      <div class=\"input-box\">\r\n        <el-input class=\"input2\" :class=\"{'active':subAmount[2]>0}\" size=\"small\" v-model=\"subAmount[2]\"></el-input>\r\n        <el-button @click=\"setMax(2)\">MAX</el-button>\r\n      </div>\r\n      <div class=\"line\"><span>邀请挖矿矿池：</span> <span>Balance:  {{\r\n          balanceArr[3] > 0 ? balanceArr[3] : 0 | formatNumberTo\r\n        }}  RBT</span></div>\r\n      <div class=\"input-box\">\r\n        <el-input class=\"input2\" :class=\"{'active':subAmount[3]>0}\" size=\"small\" v-model=\"subAmount[3]\"></el-input>\r\n        <el-button @click=\"setMax(3)\">MAX</el-button>\r\n      </div>\r\n      <div class=\"line\"><span>我的活期存款：</span> <span>Balance:  {{\r\n          balanceArr[4] > 0 ? balanceArr[4] : 0 | formatNumberTo\r\n        }}  RBT</span></div>\r\n      <div class=\"input-box\">\r\n        <el-input class=\"input2\" :class=\"{'active':subAmount[4]>0}\" size=\"small\" v-model=\"subAmount[4]\"></el-input>\r\n        <el-button @click=\"setMax(4)\">MAX</el-button>\r\n      </div> -->\r\n      <div class=\"line\">\r\n        <el-button @click=\"dialogVisible=false\">取消</el-button>\r\n        <el-button @click=\"pledge\">质押</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Moment from 'moment'\r\nimport {mapGetters} from \"vuex\";\r\nimport {RainbowBank} from \"@/utils/address.json\"\r\nexport default {\r\n  name: \"RBTBank\",\r\n\r\n  data() {\r\n    return {\r\n      updateTable: false,\r\n      subAmount: [0, 0, 0, 0, 0],\r\n      balanceArr: [0, 0, 0, 0, 0],\r\n      amount: 0,\r\n      RBT:0,\r\n      arr1: [],//锁仓挖矿质押哪几笔\r\n      arr2: [],//锁仓挖矿质押哪几笔 多少钱\r\n      dialogVisible: false,\r\n      monthsArr: [{label: \"活期\", value: 0}, {label: \"三个月\", value: 3}, {label: \"六个月\", value: 6},\r\n      {label: \"十二个月\", value: 12}, {label: \"二十四个月\", value: 24}, {label: \"三十六个月\", value: 36}],\r\n      chooseMonth: null,\r\n      selectIndex: null,\r\n      allowance: 0,\r\n      isShowRecord: false,//过期dialog\r\n      accountData: [],\r\n      isLoadingT: false,\r\n      isLoadingT2: false\r\n    }\r\n  },\r\n  created() {\r\n    this.initData()\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'isConnected',\r\n      'account',\r\n      'btcPrice',\r\n      'web3'\r\n    ]),\r\n    bankTokenArr() { //发布借款信息表格\r\n      let arr = []\r\n      this.$store.state.rainbowBank.records.forEach((item, index) => {\r\n        let obj = {\r\n          index: index + 1,\r\n          nameObj: {\r\n            title: \"令牌编号\",\r\n            data: item.tokenId\r\n          },\r\n          infoArr: [\r\n            {\r\n              title: \"锁仓类型\",\r\n              data: item.month + \"个月\"\r\n            },\r\n            {\r\n              title: \"包含RBT数量\",\r\n              data: item.amount\r\n            },\r\n            {\r\n              title: \"生成社区治理令牌总额度\",\r\n              data: \"\"\r\n            },\r\n            {\r\n              title: \"目前还可以生成社区治理令牌额度\",\r\n              data: \"\"\r\n            },\r\n          ],\r\n          detailArr: [\r\n            {\r\n              title: \"初始生成人\",\r\n              data: item.depositor.substr(0, 3) + '...' + item.depositor.substr(item.depositor.length - 3, 3)\r\n            },\r\n            {\r\n              title: \"现在所有人\",\r\n              data: item.depositor.substr(0, 3) + '...' + item.depositor.substr(item.depositor.length - 3, 3)\r\n            },\r\n            {\r\n              title: \"生成时间\",\r\n              data: Moment(item.created_at).format('YYYY-MM-DD')\r\n            },\r\n            {\r\n              title: \"到期时间\",\r\n              data: Moment(item.updated_at).format('YYYY-MM-DD')\r\n            },\r\n            {\r\n              title: \"剩余天数\",\r\n              data: item.month*30\r\n\r\n            },\r\n          ],\r\n          withdrawa:\r\n            {\r\n              address: item.depositor,\r\n              tokenid: item.tokenId\r\n\r\n            }\r\n\r\n        }\r\n        arr.push(obj)\r\n\r\n      })\r\n      return arr\r\n    },\r\n\r\n    excRecords() {\r\n      return this.$store.state.seedExc.records\r\n    },\r\n    consensusRecords() {\r\n      return this.$store.state.consensus.records;\r\n    },\r\n    contributionRecords() {\r\n      return this.$store.state.contribution.records\r\n    },\r\n    inviteRecords() {\r\n      return this.$store.state.invite.records\r\n    },\r\n    seedExcA() {\r\n      return this.$store.state.seedExc.totalExc * 0.9 - this.$store.state.seedExc.extracted\r\n    },\r\n    consensusA() {\r\n      return this.$store.state.consensus.getRbtRecord.lockNum + this.$store.state.consensus.getRbtRecord.extractable\r\n    },\r\n    contributionA() {\r\n      return this.$store.state.contribution.getRbtRecord.lockNum + this.$store.state.contribution.getRbtRecord.extractable\r\n    },\r\n\r\n  },\r\n\r\n  watch: {\r\n    isConnected() {\r\n      this.initData()\r\n    },\r\n  },\r\n  methods: {\r\n    monthChange() { //月份改变可用改变\r\n      switch (this.chooseMonth) {\r\n        case 0:\r\n          this.balanceArr[1] = 0;\r\n          this.balanceArr[2] = 0;\r\n          this.balanceArr[3] = 0;\r\n          break;\r\n        case 3:\r\n          this.balanceArr[1] = Math.floor((this.seedExcA) / 3);\r\n          this.balanceArr[2] = Math.floor(this.consensusA / 3);\r\n          this.balanceArr[3] = Math.floor(this.contributionA / 3);\r\n          break;\r\n        case 6:\r\n          this.balanceArr[1] = Math.floor((this.seedExcA) / 2);\r\n          this.balanceArr[2] = Math.floor(this.consensusA / 2);\r\n          this.balanceArr[3] = Math.floor(this.contributionA / 2);\r\n          break;\r\n        case 9:\r\n          this.balanceArr[1] = Math.floor((this.seedExcA) * 2 / 3);\r\n          this.balanceArr[2] = Math.floor(this.consensusA * 2 / 3);\r\n          this.balanceArr[3] = Math.floor(this.contributionA * 2 / 3);\r\n          break;\r\n        case 12:\r\n        case 24:\r\n        case 36:\r\n          this.balanceArr[1] = this.$store.state.seedExc.totalExc - this.$store.state.seedExc.extracted\r\n          this.balanceArr[2] = this.$store.state.consensus.getRbtRecord.allRbt\r\n          this.balanceArr[3] = this.$store.state.contribution.getRbtRecord.allRbt\r\n      }\r\n    },\r\n    setMax() {\r\n      this.amount = this.RBT\r\n    },\r\n    async getDeposit() {\r\n      this.isLoadingT2 = true\r\n      await this.$store.dispatch(\"RbtDeposit721/tokenMetadata\", 1)\r\n      this.isLoadingT2 = false\r\n    },\r\n    async getRecord() {\r\n      this.getDeposit()\r\n      this.isLoadingT = true\r\n      // await this.$store.dispatch(\"seedExc/getSubData\")\r\n      // await this.$store.dispatch(\"consensus/getRbtRecord\")\r\n      // await this.$store.dispatch(\"consensus/getSubData\")\r\n      // await this.$store.dispatch(\"contribution/getRbtRecord\")\r\n      // await this.$store.dispatch(\"contribution/getSubData\")\r\n      this.isLoadingT = false\r\n\r\n      this.balanceArr[0] = this.$store.state.erc20.RBT\r\n\r\n      this.accountData = [\r\n        {\r\n          name: \"钱包\",\r\n          available: this.$store.state.erc20.RBT,\r\n          waitExtract: 0,\r\n          locked: 0,\r\n        },\r\n        {\r\n          name: \"种子轮兑换矿池\",\r\n          available: this.$store.state.seedExc.totalExc - this.$store.state.seedExc.extracted,\r\n          waitExtract: this.$store.state.seedExc.released - this.$store.state.seedExc.extracted,\r\n          locked: this.$store.state.seedExc.totalExc - this.$store.state.seedExc.released,\r\n        },\r\n        {\r\n          name: \"共识挖矿矿池\",\r\n          available: this.$store.state.consensus.getRbtRecord.allRbt,\r\n          waitExtract: this.$store.state.consensus.getRbtRecord.extractable,\r\n          locked: this.$store.state.consensus.getRbtRecord.lockNum,\r\n        },\r\n        {\r\n          name: \"贡献挖矿矿池\",\r\n          available: this.$store.state.contribution.getRbtRecord.allRbt,\r\n          waitExtract: this.$store.state.contribution.getRbtRecord.extractable,\r\n          locked: this.$store.state.contribution.getRbtRecord.lockNum,\r\n        },\r\n      ]\r\n\r\n    },\r\n    initData() {\r\n      if (!this.isConnected) {\r\n        return;\r\n      }\r\n      this.$store.dispatch(\"rainbowBank/getInfo\").then(() => {\r\n        this.updateTable = true\r\n      })\r\n      this.$store.dispatch('RBT/balanceOf', this.account).then(res=>{\r\n        this.RBT = res/10**18\r\n      })\r\n    },\r\n    checkLimit() {\r\n      if (this.accountData[0].extract > this.accountData[0].available) {\r\n        this.accountData[0].extract = this.accountData[0].available\r\n      }\r\n    },\r\n    chooseMax(index) {\r\n      this.accountData[index].extract = this.accountData[index].available\r\n      this.$set(this.accountData, index, this.accountData[index])\r\n    },\r\n    chooseRecord() { // 根据质押钱数选择哪几笔\r\n      let arrIdx = [], arrAmount = [], templateAmount = 0\r\n      if (parseFloat(this.subAmount[1]) > 0) { //种子轮兑换\r\n        this.excRecords.forEach(record => {\r\n          templateAmount += (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12\r\n          if (templateAmount < parseFloat(this.subAmount[1])) {\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push((record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n            return\r\n          } else {\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push(parseFloat(this.subAmount[1]) - templateAmount + (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n          }\r\n\r\n        })\r\n      }\r\n      this.arr1 = []\r\n      this.arr2 = []\r\n      this.arr1.push(arrIdx)\r\n      this.arr2.push(arrAmount)\r\n      arrIdx = [], arrAmount = [], templateAmount = 0\r\n      if (parseFloat(this.subAmount[2]) > 0) { // 共识挖矿\r\n        this.consensusRecords.forEach(record => {\r\n          templateAmount += (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12\r\n          if (templateAmount < parseFloat(this.subAmount[2])) {\r\n\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push((record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n            return\r\n          } else {\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push(parseFloat(this.subAmount[2]) - templateAmount + (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n          }\r\n\r\n        })\r\n      }\r\n      this.arr1.push(arrIdx)\r\n      this.arr2.push(arrAmount)\r\n      arrIdx = [], arrAmount = [], templateAmount = 0\r\n      if (parseFloat(this.subAmount[3]) > 0) { // 邀请挖矿\r\n        this.inviteRecords.forEach(record => {\r\n          templateAmount += (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12\r\n          if (templateAmount < parseFloat(this.subAmount[3])) {\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push((record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n            return\r\n          } else {\r\n            arrIdx.push(record.xuhao)\r\n            arrAmount.push(parseFloat(this.subAmount[3]) - templateAmount + (record.amount * 0.9 - record.extracted) * this.chooseMonth / 12)\r\n          }\r\n\r\n        })\r\n      }\r\n      this.arr1.push(arrIdx)\r\n      this.arr2.push(arrAmount)\r\n    },\r\n    pledge() {\r\n      if (this.account && this.account.length <= 0) {\r\n        this.$message(\"请先连接钱包\")\r\n        return\r\n      }\r\n      if (this.chooseMonth == null) {\r\n        this.$message(\"请选择存几个月\")\r\n        return\r\n      }\r\n      let account = this.account\r\n      this.$store.dispatch(\"RBT/allowance\", {\r\n        owner: account,\r\n        spender: RainbowBank\r\n      }).then(res => {\r\n        if (res < this.amount) {\r\n          this.isLoading = true\r\n          this.$store.dispatch(\"RBT/approve\", {\r\n            spender: RainbowBank,\r\n            amount: this.web3.utils.toWei((10**18).toString())\r\n          }).then(() => {\r\n            this.isLoading = false\r\n            this.subPledge()\r\n          }).catch(() => {\r\n            this.isLoading = false\r\n            this.$message({\r\n              type: 'error',\r\n              message: '授权失败'\r\n            })\r\n          })\r\n          return\r\n        } else {\r\n          this.subPledge()\r\n        }\r\n      });\r\n\r\n    },\r\n    operateRClick(tableData) {\r\n      this.release(tableData.withdrawa.tokenid)\r\n    },\r\n    release(tokenId) {\r\n      console.log(tokenId,this.account);\r\n      this.$store.dispatch(\"RainbowBank/withdrawa\", {to: this.account, tokenId}).then(() => {\r\n        this.$message.success(\"提取成功\")\r\n      }).catch((err) => {\r\n        this.$message.error(\"提取失败\" + err)\r\n      })\r\n    },\r\n    subPledge() {\r\n      this.$store.dispatch(\"RainbowBank/depositToken\", {to: this.account, month: this.chooseMonth, value:this.amount }\r\n      ).then(() => {\r\n        this.$message.success(\"质押成功\")\r\n        this.dialogVisible = false\r\n        let arr = this.$store.state.rainbowBank.records\r\n        arr.push({\r\n          month:this.chooseMonth,\r\n          tokenId:this.bankTokenArr.length +1,\r\n          created_at:new Date(),\r\n          depositor:this.account,\r\n          amount:this.amount\r\n        })\r\n        this.$store.commit(\"rainbowBank/SET_RECORDS\",arr)\r\n        this.subAmount = [0, 0, 0, 0, 0]\r\n      }).catch((err) => {\r\n        console.log(err)\r\n        this.$message.error(\"质押失败\" + err)\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.rbt-bank {\r\n  .rbt-deposit {\r\n    margin-top: 20px;\r\n  }\r\n  .r-panel{\r\n    margin-top: 20px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .icon{\r\n      width: 40px;\r\n      img{\r\n        width: 100%;\r\n      }\r\n    }\r\n    .rbt-info{\r\n      padding: 0 60px 0 20px;\r\n      .name{\r\n        font-weight: bold;\r\n        font-size: 16px;\r\n        line-height: 30px;\r\n      }\r\n      .data{\r\n        font-size: 24px;\r\n        font-weight: bold;\r\n        color: #db1f7e;\r\n        line-height: 28px;\r\n      }\r\n    }\r\n    .rbt-value{\r\n      flex-grow: 1;\r\n      .name{\r\n        font-size: 12px;\r\n        color: #a98ebd;\r\n        line-height: 30px;\r\n      }\r\n      .data{\r\n        font-size: 20px;\r\n        color: #f7921b;\r\n        line-height: 24px;\r\n        .btc-value{\r\n          font-size: 12px;\r\n          color: #0c9732;\r\n          line-height: 14px;\r\n        }\r\n      }\r\n    }\r\n    .stake-btn{\r\n      cursor: pointer;\r\n      width: 120px;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      text-align: center;\r\n      background: linear-gradient(90deg,#12c2e9 0%, #c471ed 64%, #f64f59 100%);\r\n      border-radius: 10px;\r\n      box-shadow: 0px 3px 6px 0px rgba(128,4,149,0.30);\r\n      color: white;\r\n    }\r\n  }\r\n  .dialog {\r\n    .select {\r\n      width: 120px;\r\n    }\r\n\r\n    .line {\r\n      padding: 8px 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n\r\n      .el-button {\r\n        width: 210px;\r\n        height: 42px;\r\n        border-radius: 10px;\r\n      }\r\n\r\n      .el-button:last-child {\r\n        color: white;\r\n        background: linear-gradient(225deg, #7700ff, #c4c4c4);\r\n      }\r\n    }\r\n\r\n    .input-box {\r\n      padding: 2px 4px;\r\n      border-radius: 4px;\r\n      border: 1px solid #eee;\r\n      background: #F8F8F8;\r\n      display: flex;\r\n\r\n      .active {\r\n        ::v-deep .el-input__inner {\r\n          font-weight: bold;\r\n          font-size: 14px;\r\n        }\r\n      }\r\n\r\n      .el-button {\r\n        width: 40px;\r\n        font-size: 10px;\r\n        height: 32px;\r\n        padding: 6px;\r\n        color: white;\r\n        background: linear-gradient(225deg, #7700ff, #ed6868);\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  .my-assets-info {\r\n    margin: 10px auto;\r\n    height: 100px;\r\n    width: 300px;\r\n    text-align: center;\r\n    justify-content: center;\r\n    font-size: 14px;\r\n\r\n    .rbt-number {\r\n      font-size: 22px;\r\n      margin: 4px 0;\r\n\r\n      span {\r\n        font-size: 16px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pre-button {\r\n    width: 96px;\r\n  }\r\n\r\n  .account-data {\r\n    margin: 40px auto;\r\n    width: 60%;\r\n    min-width: 800px;\r\n  }\r\n\r\n  .pledge {\r\n    margin: 40px auto;\r\n    min-width: 450px;\r\n\r\n    .operating {\r\n      display: flex;\r\n    }\r\n\r\n    .submit-button {\r\n      margin-top: 20px;\r\n      min-width: 300px;\r\n    }\r\n\r\n    .allow {\r\n      margin-top: 20px;\r\n      min-width: 200px;\r\n      width: 36%;\r\n\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rbtBank.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rbtBank.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rbtBank.vue?vue&type=template&id=51816e5b&scoped=true&\"\nimport script from \"./rbtBank.vue?vue&type=script&lang=js&\"\nexport * from \"./rbtBank.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rbtBank.vue?vue&type=style&index=0&id=51816e5b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51816e5b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}