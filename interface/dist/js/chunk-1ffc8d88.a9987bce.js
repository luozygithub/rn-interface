(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ffc8d88"],{"1d9c":function(t,e,o){},2155:function(t,e,o){},"22c6":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mortgageMarket"},[o("div",{staticClass:"mortgageMarket-nav"},[o("div",{staticClass:"mortgageMarket-nav-box"},[o("div",{class:{active:1==t.activeIndex},on:{click:function(e){t.activeIndex=1}}},[t._v("我的借款信息")]),o("div",{class:{active:2==t.activeIndex},on:{click:function(e){t.activeIndex=2}}},[t._v("我已借出")]),o("div",{class:{active:3==t.activeIndex},on:{click:function(e){t.activeIndex=3}}},[t._v("借款市场")])])]),o("borrowingMessage",{directives:[{name:"show",rawName:"v-show",value:1==t.activeIndex,expression:"activeIndex==1"}]}),o("hasBorrow",{directives:[{name:"show",rawName:"v-show",value:2==t.activeIndex,expression:"activeIndex==2"}]}),o("borrowingMarket",{directives:[{name:"show",rawName:"v-show",value:3==t.activeIndex,expression:"activeIndex==3"}]})],1)},a=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"borrowingMarket"},[o("RainbowPanel",{scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" 借款市场 ")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e,operateRName:"借给他"},on:{operateRClick:t.operateRClick}})],1)}))},proxy:!0}])}),o("RainbowPanel",{staticClass:"market",scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" 借款市场 ")]},proxy:!0},{key:"content",fn:function(){return[o("el-table",{attrs:{data:t.mortgageMarketTokenArr.slice((t.currentPage2-1)*t.pagesize2,t.currentPage2*t.pagesize2)}},[o("el-table-column",{attrs:{label:"令牌编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.tokenId))])]}}])}),o("el-table-column",{attrs:{label:"借款人"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.ownerName))])]}}])}),o("el-table-column",{attrs:{label:"包含RBT数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("formatNumberTo")(e.row.rbtAmount)))])]}}])}),o("el-table-column",{attrs:{label:"借款金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("formatNumberTo")(e.row.rbtAmount)))])]}}])}),o("el-table-column",{attrs:{label:"借款时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.day))])]}}])}),o("el-table-column",{attrs:{label:"还款时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("formatDate")(new Date(1e3*e.row.expireTime))))])]}}])}),o("el-table-column",{attrs:{label:"剩余天数"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(parseInt((1e3*e.row.expireTime-(new Date).getTime())/864e5)))])]}}])}),o("el-table-column",{attrs:{label:"年化利息"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.apy))])]}}])}),o("el-table-column",{attrs:{label:"利息费"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("formatNumberTo")(e.row.amount*parseInt(e.row.day)/360*e.row.apy)))])]}}])}),o("el-table-column",{attrs:{label:"借款"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"button1",attrs:{size:"mini"},on:{click:function(o){return t.lend(e.row.tokenId)}}},[t._v("借给他")])]}}])})],1),o("el-pagination",{attrs:{"current-page":t.currentPage2,"page-sizes":[5,10,20,40],"page-size":t.pagesize2,layout:"total, sizes, prev, pager, next, jumper",total:t.mortgageMarketTokenArr.length},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})]},proxy:!0}])})],1)},s=[],i=o("5530"),c=(o("159b"),o("2f62")),u=o("c1df"),l=o.n(u),d={name:"borrowingMarket",data:function(){return{currentPage:1,pagesize:5,currentPage2:1,pagesize2:5}},created:function(){this.isConnected},methods:{operateRClick:function(){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t},handleSizeChange2:function(t){this.pagesize2=t},handleCurrentChange2:function(t){this.currentPage2=t},isLiquidation:function(t){return(new Date).getTime()-1e3*t.expireTime<0},getData:function(){},liquidation:function(t){var e=this;console.log(t),this.$store.dispatch("mortGageLoan/liquidation",t).then((function(t){console.log(t),e.$message.success("清算成功")})).catch((function(t){console.log(t),e.$message.error("清算失败"+t)}))},borrowAgain:function(t){var e=this;this.$store.dispatch("mortGageLoan/repayment",t).then((function(t){console.log(t),e.$message.success("再次借款成功")})).catch((function(t){console.log(t),e.$message.error("再次借款失败"+t)}))},lend:function(t){var e=this;this.$store.dispatch("mortGageLoan/lend",t).then((function(t){console.log(t),e.$message.success("借款成功")})).catch((function(t){console.log(t),e.$message.error("借款失败"+t)}))}},computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["isConnected","account"])),{},{mortgageMarketTokenArr:function(){return[]},bankTokenArr:function(){var t=[];return this.$store.state.rainbowBank.records.forEach((function(e,o){var n={index:o+1,nameObj:{title:"令牌编号",data:e.tokenId},infoArr:[{title:"锁仓类型",data:e.month+"个月"},{title:"包含RBT数量",data:e.amount},{title:"生成社区治理令牌总额度",data:""},{title:"目前还可以生成社区治理令牌额度",data:""}],detailArr:[{title:"初始生成人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"现在所有人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"生成时间",data:l()(e.created_at).format("YYYY-MM-DD")},{title:"到期时间",data:l()(e.updated_at).format("YYYY-MM-DD")}],withdrawa:[{address:e.depositor,tokenid:e.tokenId}]};t.push(n)})),t}}),watch:{account:function(){}}},f=d,p=(o("5df1"),o("2877")),m=Object(p["a"])(f,r,s,!1,null,"53c3e76f",null),h=m.exports,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hasBorrow"},[o("RainbowPanel",{scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" 我已借出的订单 ")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e,operateRName:"清算",operateGName:"再次借款"},on:{operateRClick:t.operateRClick,operateGClick:t.operateGClick}})],1)}))},proxy:!0}])}),o("RainbowPanel",{staticClass:"repayment",scopedSlots:t._u([{key:"name",fn:function(){return[t._v(" 已还款订单 ")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e},on:{operateRClick:t.operateRClick}})],1)}))},proxy:!0}])})],1)},k=[],g={name:"hasBorrow",data:function(){return{}},created:function(){this.isConnected},methods:{operateGClick:function(){},operateRClick:function(t){this.liquidation(t.nameObj.data)},isLiquidation:function(t){return(new Date).getTime()-1e3*t.expireTime<0},getData:function(){this.$store.dispatch("LoanMarket/mortgageMarket")},liquidation:function(t){var e=this;console.log(t),this.$store.dispatch("LoanMarket/liquidation",t).then((function(t){console.log(t),e.$message.success("清算成功")})).catch((function(t){console.log(t),e.$message.error("清算失败"+t)}))},borrowAgain:function(t){var e=this;this.$store.dispatch("LoanMarket/repayment",t).then((function(t){console.log(t),e.$message.success("再次借款成功")})).catch((function(t){console.log(t),e.$message.error("再次借款失败"+t)}))},lend:function(t){var e=this;this.$store.dispatch("LoanMarket/mortgageMarket",t).then((function(t){console.log(t),e.$message.success("再次借款成功")})).catch((function(t){console.log(t),e.$message.error("再次借款失败"+t)}))}},computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["isConnected","account"])),{},{bankTokenArr:function(){var t=[];return this.$store.state.rainbowBank.records.forEach((function(e,o){var n={index:o+1,nameObj:{title:"令牌编号",data:e.tokenId},infoArr:[{title:"锁仓类型",data:e.month+"个月"},{title:"包含RBT数量",data:e.amount},{title:"生成社区治理令牌总额度",data:""},{title:"目前还可以生成社区治理令牌额度",data:""}],detailArr:[{title:"初始生成人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"现在所有人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"生成时间",data:l()(e.created_at).format("YYYY-MM-DD")},{title:"到期时间",data:l()(e.updated_at).format("YYYY-MM-DD")}],withdrawa:[{address:e.depositor,tokenid:e.tokenId}]};t.push(n)})),t},myMortgageExpiredArr:function(){return this.$store.state.mortGageLoan.myMortgageExpiredArr}}),watch:{account:function(){}}},v=g,_=(o("35be"),Object(p["a"])(v,b,k,!1,null,"02bbc6c8",null)),w=_.exports,y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"borrowingMessage"},[o("RainbowPanel",{scopedSlots:t._u([{key:"name",fn:function(){return[t._v("发布借款信息")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e,operateRName:"发布"},on:{operateRClick:t.operateRClick}})],1)}))},proxy:!0}])}),o("RainbowPanel",{staticClass:"my-borrow",scopedSlots:t._u([{key:"name",fn:function(){return[t._v("我的借款订单")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e,operateOName:"还款",operateGName:"再次借款"},on:{operateOClick:t.operateOClick,operateGClick:t.operateGClick}})],1)}))},proxy:!0}])}),o("RainbowPanel",{staticClass:"my-borrow",scopedSlots:t._u([{key:"name",fn:function(){return[t._v("我发布的借款订单")]},proxy:!0},{key:"content",fn:function(){return t._l(t.bankTokenArr,(function(e){return o("div",{key:e.index},[o("TableItem",{attrs:{tableData:e,operateRName:"撤销"},on:{operateRClick:t.operateRClick}})],1)}))},proxy:!0}])}),o("el-dialog",{attrs:{title:"借款订单",visible:t.isShowBorrow,width:"400px"},on:{"update:visible":function(e){t.isShowBorrow=e}}},[o("div",{staticClass:"order"},[o("div",{staticClass:"r-intro-box"},[o("div",[o("span",[t._v("编号")]),o("span",[t._v(t._s(t.borrowToken.tokenId))])]),o("div",[o("span",[t._v("生成日期")]),o("span",[t._v(" "+t._s(t._f("formatDate")(new Date(1e3*t.borrowToken.creationTime))))])]),o("div",[o("span",[t._v("到期时间")]),o("span",[t._v(" "+t._s(t._f("formatDate")(new Date(1e3*t.borrowToken.expireTime))))])]),o("div",[o("span",[t._v("剩余天数")]),o("span",[t._v(t._s(parseInt((t.borrowToken.expireTime-t.borrowToken.creationTime)/86400)))])]),o("div",[o("span",[t._v("包含RBT数量")]),o("span",[t._v(" "+t._s(t._f("formatNumberTo")(t.borrowToken.mortgageAmount)))])]),o("div",[o("span",[t._v("包含RBT价值")]),o("span",[t._v(" $"+t._s(t._f("formatNumberTo")(t.includeValue)))])]),o("div",[o("span",[t._v("已使用社区治理令牌额度")]),o("span",[t._v(" "+t._s(t._f("formatNumberTo")(t.borrowToken.usedAmount>0?t.borrowToken.usedAmount:0)))])]),o("div",[o("span",[t._v("剩余社区治理令牌额度")]),o("span",[t._v(t._s(t._f("formatNumberTo")(t.borrowToken.mortgageAmount-t.borrowToken.usedAmount)))])])]),o("div",{staticClass:"price-box"},[o("span",[t._v("借款金额")]),o("div",{staticClass:"input-box"},[o("el-input",{staticClass:"input2",attrs:{size:"mini"},model:{value:t.orderForm.amount,callback:function(e){t.$set(t.orderForm,"amount",e)},expression:"orderForm.amount"}})],1)]),o("div",{staticClass:"price-box"},[o("span",[t._v("借款时间")]),o("div",{staticClass:"input-box"},[o("el-input",{staticClass:"input2",attrs:{size:"mini"},model:{value:t.orderForm.day,callback:function(e){t.$set(t.orderForm,"day",e)},expression:"orderForm.day"}}),t._v(" 天 ")],1)]),o("div",{staticClass:"price-box"},[o("span",[t._v("年化利息")]),o("div",{staticClass:"input-box"},[o("el-input",{staticClass:"input2",attrs:{size:"mini"},model:{value:t.orderForm.interest,callback:function(e){t.$set(t.orderForm,"interest",e)},expression:"orderForm.interest"}})],1)]),o("div",{staticClass:"intro"},[t._v(" 转让成功后，将扣除您 "),o("span",{staticClass:"r-p-color"},[t._v("5%")]),t._v("的平台服务费 ")]),o("div",{staticClass:"operating"},[o("el-button",{staticClass:"button3",attrs:{size:"small"},on:{click:function(e){t.isShowTransfer=!1}}},[t._v("Cancel")]),o("el-button",{staticClass:"button1",attrs:{size:"small "},on:{click:t.release}},[t._v("提交")])],1)])])],1)},C=[],x={name:"borrowingMessage",data:function(){return{borrowToken:{},isShowBorrow:!1,orderForm:{amount:0,day:0,interest:0},currentData:{}}},methods:{operateRClick:function(t){this.isShowBorrow=!0,this.currentData=t,console.log(t)},operateOClick:function(t){this.repayment(t.mortgageMarket.tokenid)},operateGClick:function(t){this.borrowAgain(t.mortgageMarket.tokenid)},repayment:function(t){var e=this;this.isShowBorrow=!0,this.$store.dispatch("LoanMarket/repayment",{tokenId:t,day:10,value:100}).then((function(t){console.log(t),e.$message.success("还款成功")})).catch((function(t){console.log(t),e.$message.error("还款失败"+t)}))},borrowAgain:function(t){var e=this;this.isShowBorrow=!0,this.$store.dispatch("LoanMarket/mortgageMarket",{tokenId:t,amount:200,day:10,dayRate:.05}).then((function(t){console.log(t),e.$message.success("再次借款成功")})).catch((function(t){console.log(t),e.$message.error("再次借款失败"+t)}))},initData:function(){var t=this;this.isConnected&&this.$store.dispatch("rainbowBank/getInfo").then((function(){t.updateTable=!0}))},changeToken:function(t){console.log(t)},release:function(){var t=this;this.$store.dispatch("LoanMarket/mortgageMarket",{tokenId:this.currentData.withdrawa.tokenid,amount:this.orderForm.amount,day:this.orderForm.day,dayRate:this.orderForm.interest}).then((function(e){console.log(e),t.$message.success("借款成功")})).catch((function(e){console.log(e),t.$message.error("借款失败"+e)}))}},mortgage:function(){var t=this;this.$store.dispatch("LoanMarket/mortgageMarket",{id:this.borrowToken.tokenId,amount:this.orderForm.amount,day:this.orderForm.day,apy:this.orderForm.interest}).then((function(e){console.log(e),t.$message.success("发布成功"),t.isShowBorrow=!1})).catch((function(e){console.log(e),t.$message.error("发布失败"+e)}))},created:function(){this.isConnected&&this.initData()},watch:{account:function(){this.initData()}},computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["isConnected","account"])),{},{bankTokenArr:function(){var t=[];return this.$store.state.rainbowBank.records.forEach((function(e,o){var n={index:o+1,nameObj:{title:"令牌编号",data:e.tokenId},infoArr:[{title:"锁仓类型",data:e.month+"个月"},{title:"包含RBT数量",data:e.amount},{title:"生成社区治理令牌总额度",data:""},{title:"目前还可以生成社区治理令牌额度",data:""}],detailArr:[{title:"初始生成人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"现在所有人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"生成时间",data:l()(e.created_at).format("YYYY-MM-DD")},{title:"到期时间",data:l()(e.updated_at).format("YYYY-MM-DD")}],withdrawa:{address:e.depositor,tokenid:e.tokenId},mortgageMarket:[{address:e.depositor,tokenid:e.tokenId}]};t.push(n)})),t},myBorrowArr:function(){var t=[];return this.$store.state.rainbowBank.records.forEach((function(e,o){var n={index:o+1,nameObj:{title:"令牌编号",data:e.tokenId},infoArr:[{title:"锁仓类型",data:e.month+"个月"},{title:"包含RBT数量",data:e.amount},{title:"生成社区治理令牌总额度",data:""},{title:"目前还可以生成社区治理令牌额度",data:""}],detailArr:[{title:"初始生成人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"现在所有人",data:e.depositor.substr(0,3)+"..."+e.depositor.substr(e.depositor.length-3,3)},{title:"生成时间",data:l()(e.created_at).format("YYYY-MM-DD")},{title:"到期时间",data:l()(e.updated_at).format("YYYY-MM-DD")}],withdrawa:{address:e.depositor,tokenid:e.tokenId}};t.push(n)})),t},mortgageRate:function(){var t=this.orderForm.amount/this.includeValue;return t>0?t:0},includeValue:function(){return this.borrowToken.mortgageAmount},interestFee:function(){var t=this.orderForm.amount*this.orderForm.day/360*this.orderForm.interest;return t>0?t:0}})},T=x,M=(o("64cc"),Object(p["a"])(T,y,C,!1,null,"373f44e4",null)),$=M.exports,D={name:"mortgageMarket",components:{borrowingMarket:h,borrowingMessage:$,hasBorrow:w},data:function(){return{activeIndex:1}}},I=D,A=(o("4ecf"),Object(p["a"])(I,n,a,!1,null,"e0be9b9e",null));e["default"]=A.exports},"31b2":function(t,e,o){},"35be":function(t,e,o){"use strict";o("40f8")},"40f8":function(t,e,o){},"4ecf":function(t,e,o){"use strict";o("1d9c")},"5df1":function(t,e,o){"use strict";o("31b2")},"64cc":function(t,e,o){"use strict";o("2155")}}]);
//# sourceMappingURL=chunk-1ffc8d88.a9987bce.js.map